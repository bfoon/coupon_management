{% include 'base.html' %}
{% load to_space %}
{% load static %}
{% load humanize %}
{% block content %}
<!--Put some code here the render-->
<div class="container bootstrap snippets bootdey">
    <div class="row">
        <div class="col-md-12">
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">{{activitydetail.vnum}}</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group me-2">
            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
            <span class="fa fa-calendar"></span>
            This month
          </button>
        </div>
      </div>
  <div class="card-body">
        <div class="chart-bar">
           <canvas id="myBarChart" width="822" height="319"></canvas>
</div>
</div>
   <h6>{{activitydetail.ftype}}</h6>
      <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Serial:</th>
              <th scope="col">Litre</th>
              <th scope="col">Mileage</th>
              <th scope="col">Unit</th>
              <th scope="col">Request</th>
              <th scope="col">Approv</th>
              <th scope="col">Issuer</th>
              <th scope="col">Com</th>
              <th scope="col">Sign</th>
              <th scope="col">Date</th>
            </tr>
          </thead>
          <tbody>
          {% for al in actlist|slice:":15" reversed %}
            <tr>
              <td>{{ al.tid }}</td>
              <td>{{ al.serial_start }} - {{ al.serial_end }}</td>
              <td>{{al.litre}}</td>
              <td>{{al.mread}}</td>
              <td>{{al.unit}}</td>
              <td>{{al.requesterid}}</td>
              <td>{{al.approverid}}</td>
              <td>{{al.issueid}}</td>
              {% if al.comm == 1 %}
              <td>Yes</td>
              {% else %}
              <td>No</td>
              {% endif %}
              {% if al.sign is not none %}
              <td>Yes</td>
              {% else %}
              <td>No</td>
              {% endif %}
              <td>{{al.datemodified}}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </main>
  </div>




        </div>

    </div>

</div>





{% include 'footer.html' %}

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->
<script>
// Bar Chart Example
var ctx = document.getElementById("myBarChart");
var myBarChart = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: [{% for data in actchart%}'{{data.month|date:'M'}}',{%endfor%}], //loop through queryset,
    datasets: [{
      label: "Revenue",
      backgroundColor: "#4e73df",
      hoverBackgroundColor: "#2e59d9",
      borderColor: "#4e73df",
      data: [{% for data in actchart %}{{data.total_litre}},{%endfor%}],
    }],
  },
  options: {
    maintainAspectRatio: false,
    layout: {
      padding: {
        left: 10,
        right: 25,
        top: 25,
        bottom: 0
      }
    },
    scales: {
      xAxes: [{
        time: {
          unit: 'month'
        },
        gridLines: {
          display: false,
          drawBorder: false
        },
        ticks: {
          maxTicksLimit: 6
        },
        maxBarThickness: 25,
      }],
      yAxes: [{
        ticks: {
          min: 0,
          maxTicksLimit: 5,
          padding: 10,
          // Include a dollar sign in the ticks
          callback: function(value, index, values) {
            return  number_format(value) + 'L';
          }
        },
        gridLines: {
          color: "rgb(234, 236, 244)",
          zeroLineColor: "rgb(234, 236, 244)",
          drawBorder: false,
          borderDash: [2],
          zeroLineBorderDash: [2]
        }
      }],
    },
    legend: {
      display: false
    },
    tooltips: {
      titleMarginBottom: 10,
      titleFontColor: '#6e707e',
      titleFontSize: 14,
      backgroundColor: "rgb(255,255,255)",
      bodyFontColor: "#858796",
      borderColor: '#dddfeb',
      borderWidth: 1,
      xPadding: 15,
      yPadding: 15,
      displayColors: false,
      caretPadding: 10,
      callbacks: {
        label: function(tooltipItem, chart) {
          var datasetLabel = chart.datasets[tooltipItem.datasetIndex].label || '';
          return datasetLabel +':' + number_format(tooltipItem.yLabel)+ 'L';
        }
      }
    },
  }
});

</script>
<script>
   $('.datepicker').datepicker({
    format: 'mm/dd/yyyy',
    startDate: '-3d'
});
</script>

{% endblock %}

