<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  padding: 5px;
}

table.center {
  margin-left: auto;
  margin-right: auto;
}
{% load static %}
{% load humanize %}
{% load mathfilters %}
</style>
</head>
<body>
<img alt="image" height="150" src="'http://127.0.0.1:8000/static/img/car refuel 2.jpg'" width="200"/>
<h3>Report of the Fuel coupons used in <strong>{% now "F-Y" %}</strong></h3>
<h5> Generated by {{usr}}</h5>
<table class="center">
  <thead>
    <tr bgcolor="yellow" >
      <th>Vehicle</th>
      <th>Amount(D)</th>
      <th>Millage</th>
      <th>Coupon Start</th>
      <th>Coupon End</th>
      <th>Litres</th>
      <th>Issued To</th>
      <th>Signed</th>
      <th>Fuel Type</th>
    </tr>
  </thead>
  <tbody>

      {% for log in logs %}
      <tr>
          {% if log.ftype == "Diesel" %}
      <td style="text-align:center">{{log.vnum}}</td>
      <td style="text-align:center">{{log.totalamount |intcomma }}</td>
      <td style="text-align:center">{{log.mread}}</td>
      <td style="text-align:center">{{log.serial_start}}</td>
      <td style="text-align:center">{{log.serial_end}}</td>
      <td style="text-align:center">{{ log.litre |floatformat }}</td>
      <td style="text-align:center">{{ log.requesterid }}</td>
          {% if log.sign == "1" %}
      <td style="text-align:center">Y</td>
          {% else %}
      <td style="text-align:center">N</td>
          {% endif %}
      <td>{{ log.ftype }}</td>
          {% endif %}
         {% if log.ftype == "Petrol" %}
      <td style="text-align:center" bgcolor="#ccffff">{{log.vnum}}</td>
      <td style="text-align:center" bgcolor="#ccffff">{{log.totalamount |intcomma }}</td>
      <td style="text-align:center" bgcolor="#ccffff">{{log.mread}}</td>
      <td style="text-align:center" bgcolor="#ccffff">{{log.serial_start}}</td>
      <td style="text-align:center" bgcolor="#ccffff">{{log.serial_end}}</td>
      <td style="text-align:center" bgcolor="#ccffff">{{ log.litre |floatformat }}</td>
      <td style="text-align:center" bgcolor="#ccffff">{{ log.requesterid }}</td>
          {% if log.sign == "1" %}
      <td style="text-align:center" bgcolor="#ccffff">Y</td>
          {% else %}
      <td style="text-align:center" bgcolor="#ccffff">N</td>
          {% endif %}
      <td bgcolor="#ccffff">{{ log.ftype }}</td>
          {% endif %}
<!--      <td style="text-align:center">{{ log.created_at |date:'Y-m-d' }}</td>-->
    </tr>
      {% endfor %}
  </tbody>
</table>
<br>
{% for d in damount %}
<h6 class="text-dark">{{ d.ftype }} Total: D{{ d.asum |intcomma}}   |   Litre: {{ d.lt |floatformat }}</h6>
{% endfor %}
<!--<h6 class="text-dark">Petrol Total: D{{ pamount.asum |intcomma}}   |   Litre: {{ plt.lt |floatformat }}</h6>-->
<!--<h6 class="text-dark" align="right">Diesel Total Litre: {{ dlt.lt |floatformat }}</h6>-->
<!--<h6 class="text-dark" align="right">Petrol Total Litre: {{ plt.lt |floatformat }}</h6>-->
<h6 align="right">Issuer:___________________________ Sign:___________________</h6>
<br>
<table>
    <!--'Book','Start Serial', 'End Serial', 'Quantity','Fuel Type', 'Unit'-->
 <thead>
    <tr bgcolor="yellow" >
      <th>Book</th>
      <th>Start Serial</th>
      <th>End Serial</th>
      <th>Quantity</th>
      <th>Fuel Type</th>
      <th>Unit</th>
    </tr>
  </thead>

    <h5 align="center">  Coupon Book Report <strong>{% now "F-Y" %} </strong></h5>
{% for b in books %}
{% if b.quan == 1 %}
<!--book.book_id, book.fmin, book.serial_end,int(book.serial_end)+1-book.fmin, book.ftype, book.unit-->
      <tr>
      <td style="text-align:center">{{b.book_id}}</td>
      <td style="text-align:center">{{b.fmin }}</td>
      <td style="text-align:center">{{b.serial_end}}</td>
      <td style="text-align:center">{{ b.serial_end|add:1 |sub:b.fmin }}</td>
      <td style="text-align:center">{{b.ftype}}</td>
      <td style="text-align:center">{{ b.unit }}</td>

<!--      <td style="text-align:center">{{ log.created_at |date:'Y-m-d' }}</td>-->
    </tr>
    {% endif %}
      {% endfor %}

  </tbody>
</table>
{% for ba in bamunt %}
<h6 class="text-dark">{{ ba.ftype }} Total: D{{ ba.totalAmount__sum | intcomma }}   |   Remaining coupons: </h6>
{% endfor %}
<!--<h6 class="text-dark">Petrol Total: D{{ pamount.asum |intcomma}}   |   Litre: {{ plt.lt |floatformat }}</h6>-->
<br>
<h6 align="right"> Book Keeper:_______________________________ Sign:_________________</h6>
<br>
<h6 align="right"> Issuer:_______________________________ Sign:_________________</h6>
<br>
<table>
 <thead>
    <tr bgcolor="yellow" >
      <th>Vehicle</th>
      <th>Amount(D)</th>
      <th>Total Litre</th>
    </tr>
  </thead>
<br>
    <h5 align="center">Fuel Consumption by Vehicle <strong>{% now "F-Y" %}</strong></h5>
{% for v in vamount %}
<!--book.book_id, book.fmin, book.serial_end,int(book.serial_end)+1-book.fmin, book.ftype, book.unit-->
      <tr>
      <td style="text-align:center">{{v.vnum}}</td>
      <td style="text-align:center">{{v.asum |intcomma}}</td>
      <td style="text-align:center">{{v.lt |floatformat}}</td>

<!--      <td style="text-align:center">{{ log.created_at |date:'Y-m-d' }}</td>-->
    </tr>
      {% endfor %}

  </tbody>
</table>
    </body>
</html>